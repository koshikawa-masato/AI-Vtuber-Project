# リッチメニュー設計（規約統合版）

## 概要

牡丹プロジェクトLINE Botのリッチメニューに、利用規約・免責事項へのリンクを追加する設計。

## リッチメニューレイアウト

### パターン1: 3姉妹選択 + 規約（推奨）

```
┌──────────────────────────────────┐
│   牡丹   │   花相   │   百合    │  ← キャラクター選択
│  (botan) │ (kasho)  │  (yuri)   │
├──────────────────────────────────┤
│  📋 使用上の注意・規約             │  ← 規約リンク（新規）
└──────────────────────────────────┘
```

**メリット**:
- シンプルで分かりやすい
- 規約が目立つ
- タップしやすい

### パターン2: 3姉妹 + 規約 + その他機能

```
┌──────────────────────────────────┐
│   牡丹   │   花相   │   百合    │
├──────────────────────────────────┤
│ 📋 規約  │  ℹ️ ヘルプ  │ 📊 統計  │
└──────────────────────────────────┘
```

**メリット**:
- 機能が充実
- ヘルプ・統計も追加可能

**デメリット**:
- やや複雑

## 規約ページのホスティング

### オプション1: GitHub Pages（推奨）

**手順**:
1. GitHubリポジトリで GitHub Pages を有効化
2. `docs/牡丹プロジェクト_利用規約・免責事項.md` を公開
3. URL: `https://koshikawa-masato.github.io/AI-Vtuber-Project/牡丹プロジェクト_利用規約・免責事項.html`

**メリット**:
- 無料
- GitHubで管理
- 自動デプロイ
- バージョン管理

### オプション2: VPSで静的ページとして配信

**手順**:
1. VPS上でNginxを設定
2. `/var/www/html/terms.html` に配置
3. URL: `https://133.167.93.123/terms.html`

**メリット**:
- 自分で完全管理
- カスタマイズ自由

**デメリット**:
- SSL証明書が必要
- ドメイン取得推奨

### オプション3: Notion/HackMD等の外部サービス

**手順**:
1. Notionで公開ページを作成
2. URLをリッチメニューに埋め込み

**メリット**:
- 簡単
- 編集しやすい

**デメリット**:
- 外部依存
- カスタマイズ制限

## 実装例（GitHub Pages版）

### ステップ1: GitHub Pages設定

```bash
# 1. リポジトリ設定
# GitHub → Settings → Pages
# Source: Deploy from a branch
# Branch: main, /docs

# 2. 確認
# https://koshikawa-masato.github.io/AI-Vtuber-Project/
```

### ステップ2: Markdownを HTMLに変換（オプション）

```bash
# pandocを使用（既にインストール済みの場合）
pandoc docs/牡丹プロジェクト_利用規約・免責事項.md \
  -o docs/terms.html \
  --standalone \
  --css=style.css
```

または、GitHub Pagesが自動でMarkdownをレンダリング。

### ステップ3: リッチメニュー設定変更

```python
# src/line_bot_vps/rich_menu_manager.py

RICH_MENU_CONFIG = {
    "areas": [
        # 牡丹
        {
            "bounds": {"x": 0, "y": 0, "width": 833, "height": 843},
            "action": {
                "type": "postback",
                "data": "character=botan"
            }
        },
        # 花相
        {
            "bounds": {"x": 834, "y": 0, "width": 833, "height": 843},
            "action": {
                "type": "postback",
                "data": "character=kasho"
            }
        },
        # 百合
        {
            "bounds": {"x": 1667, "y": 0, "width": 833, "height": 843},
            "action": {
                "type": "postback",
                "data": "character=yuri"
            }
        },
        # 規約（NEW）
        {
            "bounds": {"x": 0, "y": 844, "width": 2500, "height": 843},
            "action": {
                "type": "uri",
                "uri": "https://koshikawa-masato.github.io/AI-Vtuber-Project/牡丹プロジェクト_利用規約・免責事項"
            }
        }
    ]
}
```

### ステップ4: リッチメニュー画像の更新

```bash
# 画像に「📋 使用上の注意・規約」テキストを追加
# Pythonスクリプトで自動生成

python scripts/create_richmenu_with_terms.py
```

## 規約ページのデザイン

### シンプル版（Markdown）

GitHub Pagesが自動レンダリング：
- 見出し
- 箇条書き
- 強調

### カスタム版（HTML + CSS）

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>牡丹プロジェクト 利用規約</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #e91e63;
            border-bottom: 2px solid #e91e63;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>📋 牡丹プロジェクト 利用規約</h1>
    
    <div class="warning">
        <strong>⚠️ 重要な注意事項</strong>
        <p>本サービスはAIによる自動応答であり、不本意な内容が含まれる可能性があります。</p>
    </div>
    
    <!-- 本文 -->
</body>
</html>
```

## テスト手順

### 1. GitHub Pagesデプロイ

```bash
# コミット・プッシュ
git add docs/牡丹プロジェクト_利用規約・免責事項.md
git commit -m "docs: 利用規約・免責事項を追加"
git push origin main

# GitHub Pagesでアクセス確認
# https://koshikawa-masato.github.io/AI-Vtuber-Project/...
```

### 2. リッチメニュー更新

```bash
# VPSにSSH接続
ssh sakura-vps

# リッチメニュー再設定スクリプト実行
cd AI-Vtuber-Project
python3 scripts/setup_richmenu_vps.py
```

### 3. 動作確認

1. LINE Botを開く
2. リッチメニューの「📋 使用上の注意・規約」をタップ
3. ブラウザで規約ページが開くことを確認

## まとめ

### 実装優先順位

**Phase 1: 最小限（今すぐできる）**
- [ ] GitHub Pagesを有効化
- [ ] Markdownファイルを公開
- [ ] リッチメニューにURLを追加

**Phase 2: デザイン改善**
- [ ] HTMLカスタマイズ
- [ ] CSSでスタイリング
- [ ] レスポンシブ対応

**Phase 3: 機能追加**
- [ ] 同意チェックボックス（必要に応じて）
- [ ] バージョン履歴
- [ ] FAQ追加

### 法的効力

✅ **リッチメニューに規約リンク** → ユーザーがいつでも確認可能
✅ **初回利用時のメッセージ** → 規約への同意を促す
✅ **規約の明示** → 免責事項の効力発生

---

作成日: 2025-11-13
