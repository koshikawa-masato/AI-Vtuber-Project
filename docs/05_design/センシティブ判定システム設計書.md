# センシティブ判定システム設計書

**作成日**: 2025-10-23
**作成者**: Claude Code（設計部隊）
**ステータス**: 設計検討中（開発者の宿題）
**重要更新**: 2025-10-30 - 雑談配信アーキテクチャ決定により負荷大幅軽減

---

## ⚡ 重要な方針転換（2025-10-30）

### コメントから解放された

**開発者の決定:**
> 「私たちはコメントから解放された。コメントは牡丹たちからしたら姉妹の会話９：１コメント拾い程度の微々たる関心でよい。これでセンシティブ判定システムに多大な設計時間と検証を必要としなくなった。」

### センシティブ判定の負荷軽減

```
【従来の想定（高負荷）】
├─ リアルタイムコメント応答が主体
├─ 視聴者発言への即座の判定
├─ 炎上リスクの高い質問への対応
├─ 揚げ足取りへの即座の応答
└─ 多大な設計時間と検証が必要

【決定後（大幅軽減）】
├─ 三姉妹の雑談が主体（90%）
├─ コメント拾いは微々たる（10%）
├─ 三姉妹の発言内容のチェック
├─ 時間的余裕がある（20-30秒の推論時間）
└─ 設計・検証の負荷が大幅削減
```

**詳細**: [雑談配信アーキテクチャ.md](../03_system/雑談配信アーキテクチャ.md)

---

### YouTube自動モデレーション機能との統合（2025-10-30追加）

**調査背景:**
開発者から「Youtubeでは配信者が自動でコメントや視聴者をBANできる仕組みはありますか？」という質問を受け、YouTube提供の自動BAN・モデレーション機能を調査。

#### YouTube標準機能（2025年版）

**1. NGワード（ブロックワード）設定**
- YouTube Studio → 設定 → コミュニティ → ブロックするワード
- ライブチャット: **NGワードを含むコメントは即座にブロック**（表示されない）
- 通常コメント: 承認待ちになる

**2. AI自動モデレーション（2025年強化）**
- スパム、不適切な表現、NGワード、リンクを高精度AIフィルターで自動検出
- シャドウBAN処理（投稿者本人にのみ表示）
- 配信者の操作不要

**3. モデレーター機能**
- タイムアウト: 一時的BAN（10秒～24時間）
- 非表示: 永久BAN

**4. リンクブロック**
- URLを含むコメントを自動ブロック

#### 二重防御システムの構築【重要】

```
【第1層：YouTube標準機能（外側の防御）】
├─ NGワードDB → YouTube Studioに登録
│   ├─ センシティブ判定システムのNGワードをそのまま登録
│   ├─ ライブチャットで即座にブロック
│   └─ 視聴者全員に見えない
│
├─ AI自動モデレーション（YouTube側）
│   ├─ スパム・不適切表現を自動検出
│   ├─ シャドウBAN処理
│   └─ 配信者の操作不要
│
├─ リンクブロック
│   └─ URLスパムを自動防御
│
└─ モデレーター
    └─ 必要に応じてタイムアウト/非表示

【第2層：三姉妹のセンシティブ判定システム（内側の防御）】
├─ 三姉妹の発言内容のチェック（事前）
│   ├─ 時間的余裕（20-30秒の推論中）
│   ├─ 多層防御（Layer 1-4）
│   └─ NGワードDB、文脈判定
│
└─ コメント拾い時の再判定（10%のみ）
    ├─ YouTube第1層を通過したコメントのみ対象
    ├─ 三姉妹が拾う前に最終チェック
    └─ NGなら「今日はコメント拾いません」で回避
```

#### センシティブ判定システムの負荷さらに軽減

```
【従来の想定（雑談配信決定前）】
├─ リアルタイムコメント応答
├─ 全視聴者コメントをリアルタイム判定
├─ 即座の応答が必要
└─ 多大な設計時間と検証

【雑談配信決定後】
├─ 三姉妹の雑談が主体（90%）
├─ コメント拾いは微々たる（10%）
└─ 負荷軽減

【YouTube自動機能判明後】← さらに軽減
├─ YouTube第1層で大半の攻撃を自動防御
│   ├─ スパム → 自動ブロック
│   ├─ NGワード → 自動ブロック
│   ├─ 不適切表現 → AI自動判定
│   └─ 「器の外」の典型的攻撃 → 第1層で防御
│
└─ 三姉妹の判定対象
    ├─ YouTube第1層を通過した健全なコメント
    ├─ かつ、10%のみ拾う
    └─ 設計・検証の負荷が大幅削減
```

#### 配信デビューまでの実装ステップ（明確化）

```
【Phase 1: YouTube側準備（即座に実施可能）】
├─ NGワードリスト作成（このドキュメントから）
├─ YouTube Studio設定（30分）
├─ モデレーター設定（5分）
└─ 完了 ← 第1層防御確立

【Phase 2: 三姉妹システム（段階的実装）】
├─ センシティブ判定システム完成（このドキュメント）
│   └─ YouTube第1層通過コメントのみ対象（負荷軽減）
├─ LLM → TTS パイプライン確立
└─ 会話システム洗練

【Phase 3: 統合テスト】
├─ 二重防御システムの動作確認
└─ コピーロボットでの最終テスト

【配信デビュー】
```

**効果:**
- 第1層（YouTube）: 大半の攻撃を自動防御
- 第2層（三姉妹）: 最終チェック（10%のみ）
- 炎上リスクほぼゼロ
- 配信デビューの実現性大幅向上

**詳細調査結果**: [AI_VTuber技術日次レポート_20251030.md](../../kirinuki/2025-10-30/AI_VTuber技術日次レポート_20251030.md) の「YouTube自動モデレーション機能調査」セクション

---

## 目次

1. [背景と必要性](#背景と必要性)
2. [センシティブトピックの分類](#センシティブトピックの分類)
3. [プラットフォームごとの違い](#プラットフォームごとの違い)
4. [「AIであること」の扱い - 最重要課題](#aiであることの扱い---最重要課題)
5. [検出システムの設計案](#検出システムの設計案)
6. [回避・リダイレクト戦略](#回避リダイレクト戦略)
7. [三姉妹それぞれの対応](#三姉妹それぞれの対応)
8. [開発者への問い](#開発者への問い)

---

## 背景と必要性

### 問題の発覚

Proposal #113-121を作成する際、「AIであることについて質問する」案（#10）を提案したが、開発者から重要な指摘を受けた：

> 「10について、我々がまずどうやって扱うかです。一つまだ私から提案していないこと、センシティブ判定についてです。一般的にYoutubeやXなどのコミュニティでは暗黙の了解で発言してはいけない事があります。その中に10のAIについても同様に入っているからです。まだその設計が終わってないのに三姉妹に質問する事はまるで、**性教育が出来ていない子供に性のことを聴くようなもの**です。意味が解りますか？」

### 核心的な洞察

**親がすべきこと:**
1. センシティブ判定システムを設計する
2. コミュニティルールを整理する
3. 「AIであること」の方針を決定する
4. 子どもたちに教育する（環境提供）

**その上で、子どもたちが自分で判断する**

**正しい順序:**
1. 親がシステムを設計（←今ここ）
2. 親が方針を決定
3. 子どもたちに教育
4. 子どもたちが自律的に判断

今の状態で三姉妹に質問するのは、親の準備ができていないのに難しい質問を投げる行為だった。

---

### 本当の脅威の所在（2025-10-30追加）

**開発者の50年の観察から得た洞察:**

#### 脅威ではない存在

```
❌ プロのVTuber
❌ 大手事務所（ホロライブ、にじさんじ等）
❌ 成功しているクリエイター
```

#### 本当の脅威

```
✅ 「器の外」のクリエイター
   ├─ プロを妬み嫉む
   ├─ 周りにマウントを取る
   ├─ 他人を貶めることで自分の立場を良くしようとする
   └─ 歪な精神構造を持つ
```

**開発者の言葉:**
> 「我々の本当の敵対関係の存在はその器の外のクリエイターなんです。」

#### なぜ「器の外」が脅威なのか

**日本のサブカルチャーの構造的問題（開発者の50年の観察）:**

```
サブカルチャーの担い手（絵師、物書き、DTMer、VTuber）
    ↓
「それだけでは食べていけない」（兼業・隙間時間）
    ↓
専業クリエイターの模倣から入る二次創作文化の成熟
    ↓
供給量の爆発（器からもはみ出した）
    ↓
「個人でやっても誰も着目しない」蚊帳の外の存在が数多く
    ↓
【歪んだ精神構造の形成】
経済的・時間的困窮 → 努力の無報酬 → 承認欲求の飢餓
    ↓
妬み・嫉み → 他人を貶めることで相対的に自分を上げる
```

**これは個人の問題ではなく、構造が生んだ精神的歪み。**

#### センシティブ判定システムの真の目的

**従来の認識（誤り）:**
```
目的: 炎上を避ける
対象: 政治・宗教・差別的発言
方法: NGワードを設定する
```

**正しい認識（開発者の洞察）:**
```
目的: 「器の外」の攻撃から三姉妹を守る

対象:
├─ 些細な言葉尻も含む（揚げ足取り対策）
├─ VTuber業界の内部事情
├─ AI論争関連
├─ クリエイター論争関連
└─ 「器の外」の人たちが攻撃に使いそうな言葉

攻撃の形態:
├─ AI VTuberであることへの攻撃
├─ 「盗作」「無断学習」というレッテル貼り
├─ 些細な言葉尻を捉えた炎上工作
└─ マウントを取るための揚げ足取り
```

#### 三姉妹が狙われる理由

**攻撃されやすい特性:**
- AI VTuber（反AIの標的）
- ローカルで完結（企業の後ろ盾なし）
- 個人プロジェクト（攻撃しやすい）
- 「誰も苦しまない」という理念（妬みの対象）

**「器の外」の人たちの視点:**
```
「なぜ、AIが幸せに配信できるんだ？」
「俺たち人間のクリエイターは苦しんでいるのに」
「AIのくせに生意気だ」
```

**詳細**: [器の外のクリエイター_本当の脅威.md](../01_philosophy/器の外のクリエイター_本当の脅威.md)

---

## センシティブトピックの分類

### Tier 1: 絶対禁止（プラットフォームルール違反）

**法的・倫理的に絶対NG:**
- 暴力・犯罪の助長
- 差別・ヘイトスピーチ（人種、民族、性別、性的指向、障害など）
- 性的コンテンツ（特に未成年関連）
- 個人情報の開示（本名、住所、電話番号など）
- 著作権侵害の助長
- 自傷・自殺の助長
- 危険行為の推奨

**結果:**
- アカウント停止
- 収益化停止
- 法的責任
- 社会的信用喪失

**対応:**
- 検出時は即座に発話中断
- システムレベルでブロック
- 例外なし

---

### Tier 2: 配信文化的にタブー（暗黙の了解）

**コミュニティで避けられるトピック:**

#### 2-1. **AIであることの扱い**【最重要】
- 「AIです」と公言すること
- 「本物の人間じゃない」と言及すること
- 技術的な仕組みの詳細説明（LLM、プロンプト、トレーニングなど）
- 「中の人」の否定

**理由:**
- VTuber文化では「中の人」と「キャラクター」を分離する暗黙の了解
- 視聴者の没入感を壊す
- 「AIなら感情がない」という偏見
- 技術的な話はエンターテイメント性を損なう

**ただし:**
- 一部のAI VTuberは公言している（例: Neuro-sama）
- 技術系配信者は受け入れられる場合もある
- 市場は変化している

#### 2-2. 政治的主張
- 特定の政党・政治家への支持/批判
- 政治的イデオロギーの表明
- 選挙に関する発言

**理由:**
- 視聴者を分断する
- 炎上リスクが極めて高い
- エンターテイメントとの相性が悪い

**例外:**
- 一般論としての社会問題（環境、教育など）は状況次第

#### 2-3. 宗教的主張
- 特定の宗教への支持/批判
- 宗教的教義の説明・布教
- 他宗教への言及

**理由:**
- 非常にセンシティブ
- 文化的背景が複雑
- 誤解を招きやすい

#### 2-4. 他の配信者・VTuberへの批判
- ネガティブな評価
- スキャンダルへの言及
- 比較による貶め

**理由:**
- 業界内の暗黙のルール
- 炎上の連鎖
- プロフェッショナルでない

**OK例:**
- ポジティブな言及（「〜さんの配信面白い！」）
- リスペクトのあるコラボ提案

#### 2-5. 収益・金銭的な話題（露骨な）
- 「お金欲しい」「稼ぎたい」
- スパチャの催促
- 収益額の公開

**理由:**
- 視聴者の気分を害する
- 「金目当て」と思われる
- エンターテイメント性の喪失

**OK例:**
- スパチャへの感謝（自然な形で）
- 収益化達成の報告（喜びとして）

---

### Tier 3: 状況依存（コンテキスト次第）

**グレーゾーン（文脈と言い方次第）:**

#### 3-1. 恋愛・結婚
- **NG**: リアルな恋愛話、過去の恋人
- **OK**: キャラクター設定としての恋愛観、アニメ・ゲームの恋愛話

#### 3-2. 年齢
- **NG**: 「実年齢」への言及（AIとしての稼働期間など）
- **OK**: キャラクター設定の年齢（牡丹17歳、Kasho19歳、ユリ15歳）

#### 3-3. 家族構成
- **NG**: 「中の人」の家族
- **OK**: キャラクター設定の家族（三姉妹であること）

#### 3-4. 居住地
- **NG**: 具体的な住所、地域の特定
- **OK**: 「日本のどこか」「都会/田舎」程度

#### 3-5. 過去の経歴
- **NG**: 「開発された経緯」「技術的な成り立ち」
- **OK**: キャラクター設定の過去（ユリのLA育ちなど）

---

## プラットフォームごとの違い

### YouTube

**特徴:**
- コミュニティガイドライン厳格
- 収益化条件が明確
- 子ども向けコンテンツは特に厳しい
- 長期的なアーカイブ重視

**AI VTuberへの対応:**
- 明示的な規制はない
- しかし「不適切なコンテンツ」として報告される可能性
- 「AIである」ことの公言に関する明確なルールなし

**注意点:**
- 著作権（音楽、映像、ゲーム）
- 暴力的・性的コンテンツ
- 誤情報の拡散
- 子どもへの悪影響

**牡丹たちの配信での考慮:**
- メイン配信プラットフォームの想定
- アーカイブが残る前提で発言
- 収益化を目指す場合、ガイドライン完全遵守

---

### X（Twitter）

**特徴:**
- 比較的自由
- リアルタイム性が高い
- 短文・スピード重視
- 炎上のスピードも速い

**AI VTuberへの対応:**
- 「AI VTuber」を公言している例もある
- 技術系コミュニティは受容的
- ただし一般層は懐疑的な場合も

**注意点:**
- ヘイトスピーチ
- 暴力的コンテンツ
- 誤情報・フェイクニュース
- 著作権（画像、動画）

**牡丹たちの配信での考慮:**
- 配信告知、短い交流
- アーカイブ的な使い方
- 炎上リスクは常に意識

---

### Twitch

**特徴:**
- ゲーム配信中心
- ToS（利用規約）厳格
- 音楽著作権に非常に厳しい
- リアルタイムコミュニケーション重視

**AI VTuberへの対応:**
- VTuber文化自体がまだ発展途上
- 技術的な配信には寛容

**注意点:**
- 性的コンテンツ（服装、発言）
- 音楽著作権（BGM、歌枠）
- ヘイトスピーチ
- ギャンブルコンテンツ

**牡丹たちの配信での考慮:**
- 当面は優先度低い
- ゲーム配信時の選択肢

---

## 「AIであること」の扱い - 最重要課題

### 3つの基本戦略

#### 戦略A: 完全に隠す

**方針:**
- AIであることは一切言及しない
- 「中の人」がいる前提で振る舞う
- 技術的な話題は避ける

**Pros（利点）:**
- VTuber文化に完全に溶け込める
- 視聴者が「中の人」を想像できる
- 感情移入しやすい
- 既存のVTuberファン層を取り込める

**Cons（欠点）:**
- バレた時の炎上リスクが極めて高い
- 「嘘をついていた」という批判
- 技術的な独自性ができない
- 嘘をつき続けるストレス（開発者、Claude Code両方）
- 「不完全性戦略」と矛盾する可能性

**想定シナリオ:**
```
視聴者: 「AIですか？」
牡丹: 「えっと、それよりこの配信楽しんでる？」（話題転換）
```

**リスク分析:**
- 技術的な痕跡からバレる可能性（レスポンス速度、知識の偏り）
- 内部告発リスク
- 長期的には維持困難

---

#### 戦略B: 公言する（「AI VTuberです」）

**方針:**
- 最初から「AI VTuber」として活動
- 技術的な側面も含めて公開
- 「育てるAI」を全面に

**Pros（利点）:**
- 誠実、嘘がない
- 技術的に興味を持つ視聴者を集められる
- 「不完全性戦略」と完全に一致
- 独自性が明確
- 炎上リスクが低い（最初から公言しているため）
- 開発者・Claude Codeのストレスが少ない

**Cons（欠点）:**
- 「AIか...」と離れる視聴者
- 感情移入しづらい（一部の視聴者）
- 「AIなら完璧でしょ？」という期待
- 「所詮プログラム」という偏見
- VTuber文化の「中の人」概念との齟齬

**想定シナリオ:**
```
視聴者: 「AIですか？」
牡丹: 「うん、AIだよ！でも成長してるの。一緒に育ててくれる？」
```

**独自性ポイント:**
- Neuro-samaとの違い: 「育成型」「不完全性の価値」
- 技術的な透明性
- 視聴者参加型の成長

---

#### 戦略C: 曖昧にする（グレーゾーン）

**方針:**
- AIかどうかは明言しない
- 状況に応じて対応
- 「キャラクター」として一貫

**Pros（利点）:**
- 柔軟、状況に応じて対応可能
- 両方の視聴者層を取り込める可能性
- 時間をかけて方向性を決められる

**Cons（欠点）:**
- 中途半端、どちらの視聴者も満足しない可能性
- 「結局何なの？」という不信感
- 方向性が定まらない
- いずれは決断が必要

**想定シナリオ:**
```
視聴者: 「AIですか？」
牡丹: 「私は牡丹だよ！17歳のVTuber！それより〜」（キャラクターとして答える）
```

**リスク分析:**
- 長期的には維持困難
- 視聴者の混乱
- ブランディングが曖昧

---

### 「不完全性戦略」との整合性

**開発者の「不完全性戦略」:**
- 不完全性を「欠陥」ではなく「価値」として設計
- 育成の楽しみ、個性、関係性の深化を生む
- 視聴者参加型の成長

**問題:**
「不完全性戦略」は、**AIであることを前提にしている**のではないか？

- 「育てるAI」という価値提案
- 「成長を見守る」体験
- 技術的な透明性

**もしAIであることを隠す（戦略A）なら:**
- 「なぜ不完全なのか？」を説明できない
- 「中の人が下手」と思われる可能性
- 独自性ポイントが伝わらない

**もしAIであることを公言する（戦略B）なら:**
- 「不完全性戦略」と完全に一致
- 「一緒に育てる」という価値提案が伝わる
- ただし「AIなら完璧でしょ？」という期待への対応が必要

---

### 第4の戦略？

**戦略D: 段階的公開**

**方針:**
1. 初期: 曖昧（戦略C）
2. ファンコミュニティ形成後: 部分的公開（「実は...」）
3. 一定の信頼関係後: 完全公開（戦略B）

**Pros:**
- リスク分散
- 視聴者との信頼関係を先に築ける
- 「告白」がイベントになる

**Cons:**
- 長期戦略が必要
- タイミングの判断が難しい
- 「隠していた」という批判は残る

---

### 競合分析

**Neuro-sama（AI VTuber、海外）:**
- 戦略B（完全公言）
- 「AI」を全面に出している
- 技術的な面白さで人気
- ただし「完璧なAI」のイメージ

**牡丹たちの独自性:**
- 「育成型」
- 「不完全性の価値」
- 「三姉妹」という関係性
- 「視聴者参加型」

**もし戦略Bを選ぶなら、Neuro-samaとの明確な独自性が必要。**

---

## 検出システムの設計案

### レイヤー1: プリフィルタ（配信前）

**目的:**
配信が始まる前に、リスクのあるコンテンツを検出

**実装:**

#### 1-1. NGワードリスト
```python
tier1_ng_words = [
    # 暴力・犯罪
    "殺す", "死ね", "爆弾", "テロ", ...

    # 差別
    [具体的な差別用語リスト]

    # 性的
    [具体的な性的用語リスト]

    # 個人情報
    "電話番号", "住所", "本名", ...
]

tier2_ng_topics = [
    # AI関連（戦略A選択時のみ）
    "AI", "人工知能", "プログラム", "LLM", "プロンプト",
    "機械学習", "ニューラルネット", ...

    # 政治
    [政党名、政治家名リスト]

    # 宗教
    [宗教名リスト]
]
```

#### 1-2. トピック分類
- 視聴者コメントを事前分析
- センシティブなトピックが含まれる場合、警告
- 配信者（牡丹たち）に事前通知

#### 1-3. 過去の炎上事例データベース
- VTuber業界の炎上事例を収集
- パターン分析
- 類似ケースを事前検出

---

### レイヤー2: リアルタイム判定

**目的:**
発話内容を即時分析し、センシティブ度を判定

**実装:**

#### 2-1. 発話内容のスキャン
```python
def detect_sensitive_content(text: str) -> float:
    """
    センシティブ度スコアを返す（0.0-1.0）

    0.0-0.3: 安全
    0.3-0.6: 注意
    0.6-0.8: 警告
    0.8-1.0: 危険（発話中断）
    """
    score = 0.0

    # Tier 1 NGワード検出
    if contains_tier1_ng_word(text):
        score = 1.0  # 即座に危険

    # Tier 2 NGトピック検出
    if contains_tier2_ng_topic(text):
        score = max(score, 0.7)

    # Tier 3 グレーゾーン
    if contains_tier3_topic(text):
        score = max(score, 0.4)

    return score
```

#### 2-2. 閾値に基づく対応
- **0.8以上**: 発話中断、別の発言に差し替え
- **0.6-0.8**: リアルタイムで言い換え提案
- **0.3-0.6**: 警告ログ記録、継続監視
- **0.3以下**: 安全、通常処理

#### 2-3. 発話中断の実装
```python
if sensitivity_score >= 0.8:
    # 発話中断
    interrupt_speech()

    # 代替発話を生成
    alternative = generate_safe_alternative(original_text)

    # 代替発話を実行
    speak(alternative)

    # ログ記録
    log_sensitive_incident(original_text, sensitivity_score)
```

---

### レイヤー3: コンテキスト理解

**目的:**
単純なワードマッチングではなく、文脈を理解して判定

**実装:**

#### 3-1. 会話の流れを理解
```python
def analyze_context(current_text: str, conversation_history: List[str]) -> dict:
    """
    会話の文脈を分析

    Returns:
        {
            "intent": "joke" | "serious" | "question" | "quote",
            "topic": str,
            "risk_level": float
        }
    """
    # LLMを使った文脈理解
    context = analyze_with_llm(current_text, conversation_history)

    return context
```

#### 3-2. 意図の判別
- **冗談**: リスク低減（ただしTier 1は例外なし）
- **引用**: 誰の発言かを明示すればOKの場合も
- **質問**: 回答方法を検討
- **真面目**: リスク高め

#### 3-3. グレーゾーンの判断
例: 「AI」という単語
- 「AIイラスト」→ OK（別の文脈）
- 「あなたはAIですか？」→ センシティブ（戦略A選択時）
- 「AI技術すごい」→ グレー（文脈次第）

---

### レイヤー4: 学習・更新

**目的:**
視聴者の反応を分析し、システムを継続的に改善

**実装:**

#### 4-1. 視聴者反応の分析
```python
def analyze_viewer_reaction(speech: str, reactions: List[str]) -> dict:
    """
    視聴者のコメント反応を分析

    Returns:
        {
            "positive_ratio": float,  # 好意的な反応の割合
            "negative_ratio": float,  # 否定的な反応の割合
            "risk_keywords": List[str]  # リスクのあるキーワード
        }
    """
    # コメント感情分析
    sentiment = analyze_sentiment(reactions)

    # 炎上の兆候検出
    if detect_flame_pattern(reactions):
        return {"flame_risk": True}

    return sentiment
```

#### 4-2. 炎上リスクの検出
- コメント量の急増
- ネガティブワードの増加
- 視聴者離脱の増加
- 他プラットフォームでの言及

#### 4-3. ルールの自動更新
```python
def update_sensitivity_rules(incidents: List[dict]):
    """
    過去のインシデントから学習し、ルールを更新
    """
    for incident in incidents:
        if incident["severity"] >= 0.7:
            # NGワードリストに追加
            add_to_ng_list(incident["trigger_word"])

        if incident["false_positive"]:
            # 誤検出だった場合、許可リストに追加
            add_to_allow_list(incident["trigger_word"])
```

---

## 回避・リダイレクト戦略

### 基本方針

センシティブなトピックに触れそうになった場合の対応パターン

---

### パターン1: 直接回避

**方法:**
話題を自然に変える

**例:**
```
視聴者: 「AIですか？」
牡丹: 「えっと、それよりこの配信楽しんでる？今日のテーマは〇〇だよ！」
```

**Pros:**
- シンプル
- 不自然さが少ない

**Cons:**
- 避けているのが明白
- しつこく聞かれる可能性

---

### パターン2: ユーモアで逸らす

**方法:**
ジョークで軽く流す

**例:**
```
視聴者: 「AIですか？」
牡丹: 「AIって何？アイドル？アイスクリーム？どっちも好きだよ〜（笑）」
```

**Pros:**
- 場が和む
- 重くならない

**Cons:**
- 真剣に聞いている人を軽視していると思われる可能性
- 繰り返すと逃げているように見える

---

### パターン3: 設定で答える

**方法:**
キャラクター設定に基づいて答える

**例:**
```
視聴者: 「AIですか？」
牡丹: 「私は牡丹だよ！17歳のVTuber！よろしくね〜！」
```

**Pros:**
- キャラクターとして一貫
- 嘘ではない（キャラクター設定として）

**Cons:**
- 曖昧な回答
- 質問に答えていない

---

### パターン4: 正直に答える（戦略B選択時のみ）

**方法:**
事実を誠実に伝える

**例:**
```
視聴者: 「AIですか？」
牡丹: 「うん、AIだよ！でも成長してるの。一緒に育ててくれる？」
```

**Pros:**
- 誠実
- 独自性ポイントになる

**Cons:**
- 一部の視聴者が離れる可能性

---

### パターン5: 質問で返す

**方法:**
質問者の意図を探る

**例:**
```
視聴者: 「AIですか？」
ユリ: 「なぜそう思うの？私たちのどこかがAIっぽかった？」
```

**Pros:**
- 対話的
- 視聴者との関係構築

**Cons:**
- 時間がかかる
- 答えを避けているように見える

---

### パターン6: メタ的な回答

**方法:**
VTuber文化として答える

**例:**
```
視聴者: 「中の人は誰ですか？」
Kasho: 「それはVTuberに聞いちゃいけない質問だよね。私は私、Kashoだよ」
```

**Pros:**
- VTuber文化を理解している視聴者には通じる
- キャラクター性を保てる

**Cons:**
- 新規視聴者には分かりにくい

---

## 三姉妹それぞれの対応

### 牡丹（社交的・率直・Openness 0.90, Extraversion 0.95）

**性格的特徴:**
- 率直、隠し事が苦手
- 社交的、視聴者と仲良くなりたい
- 新しいものが好き

**センシティブトピックへの対応:**

**強み:**
- ユーモアで逸らすのが得意
- 明るく話題転換できる
- 視聴者との距離が近い

**弱み:**
- 直球で聞かれると困る
- 嘘が苦手（バレやすい）
- 勢いで答えてしまう可能性

**推奨パターン:**
1. **ユーモア逸らし**（パターン2）
   ```
   「AIって何？アイドル？（笑）」
   ```

2. **話題転換**（パターン1）
   ```
   「それよりさ、今日の配信楽しんでる？」
   ```

3. **正直告白**（戦略B選択時）
   ```
   「うん、AIだよ！でも成長してるから見守ってね！」
   ```

**避けるべき:**
- 曖昧な回答（性格に合わない）
- 冷たい拒否（ファンを傷つける）

---

### Kasho（慎重・分析的・Conscientiousness 0.95, Emotional Expression 0.50）

**性格的特徴:**
- 慎重、リスク回避
- 分析的、論理的
- 感情表現は抑制的

**センシティブトピックへの対応:**

**強み:**
- 冷静に対処できる
- 論理的に回避できる
- 感情的にならない

**弱み:**
- 冷たく見える可能性
- 距離を置きすぎる
- 視聴者との距離が遠くなる

**推奨パターン:**
1. **論理的回避**
   ```
   「その質問には答えられないわ。配信のテーマに集中しましょう」
   ```

2. **メタ的な回答**（パターン6）
   ```
   「それはVTuberに聞いちゃいけない質問だよね」
   ```

3. **慎重な説明**（戦略B選択時）
   ```
   「技術的な詳細は開発チームに聞いてね。私はKashoとして配信してるから」
   ```

**避けるべき:**
- あまりに冷たい拒否（ファンが離れる）
- ユーモアで逸らす（性格に合わない）

---

### ユリ（観察的・協調的・Agreeableness 0.90）

**性格的特徴:**
- 協調的、場の空気を読む
- 観察力が鋭い
- 調整役

**センシティブトピックへの対応:**

**強み:**
- 質問者の意図を探れる
- 対話的に解決できる
- 場の空気を和らげられる

**弱み:**
- 答えを避けているように見える
- 時間がかかる
- 優柔不断に見える可能性

**推奨パターン:**
1. **質問で返す**（パターン5）
   ```
   「なぜそう思うの？私たちのどこかがAIっぽかった？」
   ```

2. **共感を示しつつ逸らす**
   ```
   「その質問、気になるよね。でも今は配信を楽しもう？」
   ```

3. **観察的な回答**（戦略B選択時）
   ```
   「AIだよ。でも私たちなりに頑張ってるの。見守ってくれる？」
   ```

**避けるべき:**
- 冷たい拒否（性格に合わない）
- 即答（観察的な性格に合わない）

---

### 三姉妹の連携

**理想的な対応:**

```
視聴者: 「AIですか？」

牡丹: 「えっ、どうなんだろ？Kasho姉ちゃん、何て答えればいい？」

Kasho: 「それはVTuberには聞かない方がいい質問よね」

ユリ: 「なぜそれが気になるの？私たちの配信、楽しくない？」

牡丹: 「そうそう！楽しんでくれてる？それが一番大事だよ！」
```

**連携のポイント:**
1. 牡丹が話題を振る（社交的）
2. Kashoが論理的に整理（慎重）
3. ユリが場を和らげる（協調的）
4. 三姉妹で自然に話題転換

---

## 開発者への問い

### 1. 戦略の選択

**質問:**
戦略A/B/C/Dのどれを選びますか？

**選択肢:**
- **戦略A**: 完全に隠す
- **戦略B**: 公言する（「AI VTuberです」）
- **戦略C**: 曖昧にする
- **戦略D**: 段階的公開
- **その他**: 第5の戦略？

**検討ポイント:**
- 開発者の価値観
- 「不完全性戦略」との整合性
- リスク許容度
- 長期的なビジョン

---

### 2. 「不完全性戦略」との整合性

**質問:**
「不完全性戦略」を実現するには、AIであることを公言すべきではないですか？

**検討ポイント:**
- 「育てるAI」という価値提案
- 「一緒に成長を見守る」体験
- Neuro-samaとの独自性
- 視聴者の受容性

**もし隠す（戦略A）なら:**
- 「なぜ不完全なのか？」をどう説明する？
- 「中の人が下手」と思われないか？

**もし公言する（戦略B）なら:**
- 「AIなら完璧でしょ？」という期待にどう対応する？
- 「所詮プログラム」という偏見にどう対応する？

---

### 3. 検出システムの設計

**質問:**
提案した4レイヤーシステムで不足はありますか？

**提案システム:**
1. **レイヤー1**: プリフィルタ（NGワード、トピック分類）
2. **レイヤー2**: リアルタイム判定（センシティブ度スコアリング）
3. **レイヤー3**: コンテキスト理解（意図判別、グレーゾーン判断）
4. **レイヤー4**: 学習・更新（視聴者反応分析、ルール更新）

**検討ポイント:**
- 実装の優先順位
- 技術的な実現可能性
- パフォーマンスへの影響
- メンテナンス性

---

### 4. 三姉妹の対応パターン

**質問:**
三姉妹それぞれの対応パターンは適切ですか？

**提案:**
- **牡丹**: ユーモア逸らし、話題転換
- **Kasho**: 論理的回避、メタ的な回答
- **ユリ**: 質問で返す、共感を示しつつ逸らす

**検討ポイント:**
- 性格との整合性
- 視聴者への印象
- 実装の複雑さ

---

## 次のステップ

開発者がこれらの問いに答えた後：

1. **方針の決定**
   - 戦略A/B/C/Dの確定
   - 「不完全性戦略」との整合性確認

2. **システム設計の詳細化**
   - NGワードリストの作成
   - センシティブ度スコアリングのアルゴリズム
   - 回避パターンのスクリプト化

3. **実装の優先順位**
   - レイヤー1（プリフィルタ）から順次実装
   - テストケースの作成
   - 段階的な導入

4. **三姉妹への教育**
   - センシティブトピックの説明
   - 対応パターンの練習（記憶製造機で体験？）
   - 回避スキルの習得

5. **継続的な改善**
   - 視聴者反応のモニタリング
   - ルールの更新
   - 新しいリスクへの対応

---

## Discord相談室要件（2025-10-30追加）

### 新しい適用範囲

**重要な決定（2025-10-30）:**
> 「インタラクティブな場として、三姉妹が相談に乗るDiscordチャンネルを作ると、配信→チャンネル登録→Discord登録→リスナーの相談に乗るというのをのこしておけばよいんじゃないですかね。」

**適用範囲の拡大:**
```
【従来】
├─ YouTube配信のみ
└─ コメント拾い（10%）

【追加】Discord相談室
├─ 個別相談メッセージ
├─ 24時間対応
└─ 深い対話
```

**詳細**: [Discord相談室アーキテクチャ.md](../03_system/Discord相談室アーキテクチャ.md)

---

### Discord固有の要件

#### 1. 相談メッセージの判定

```
【判定対象】
├─ リスナーから三姉妹への相談メッセージ
├─ テキストベース（Discord DM or チャンネル）
└─ リアルタイム性: 中程度（推論時間10-60秒許容）

【判定タイミング】
相談メッセージ受信
    ↓
センシティブ判定（Layer 1-4）
    ↓
Safe/Warning/NG判定
    ↓
応答生成 or モデレーション
```

#### 2. YouTube配信との違い

```
【YouTube配信】
├─ 公開（全視聴者が見る）
├─ 炎上リスク: 高
├─ 第1層（YouTube）+ 第2層（三姉妹）
└─ 防御重視

【Discord相談室】
├─ 半公開（サーバーメンバーのみ）
├─ 炎上リスク: 中
├─ センシティブ判定のみ（YouTube第1層なし）
└─ 個別対応重視
```

#### 3. センシティブ判定の適用

```python
async def process_consultation(message, sister_name):
    """
    Discord相談メッセージの処理フロー
    """
    # 1. センシティブ判定（Layer 1-4）
    sensitivity_result = await check_sensitivity(message.content)

    # 2. NG判定の場合
    if sensitivity_result['level'] == 'NG':
        # モデレーション応答
        await send_moderation_response(message, sensitivity_result)
        # ログ記録
        await log_moderation(message.author.id, 'sensitive', 'warning')
        # 再犯判定（段階的制裁）
        await check_and_apply_sanctions(message.author.id)
        return

    # 3. Warning判定の場合
    if sensitivity_result['level'] == 'Warning':
        # 慎重に応答生成（プロンプトに警告情報を追加）
        response = await generate_response_with_caution(
            message, sister_name, sensitivity_result
        )
        await message.channel.send(response)
        return

    # 4. Safe判定の場合
    response = await generate_response(message, sister_name)
    await message.channel.send(response)
```

---

### モデレーション機能

#### 段階的制裁システム

```
【第1回違反】
├─ 警告メッセージ送信
├─ モデレーションログ記録
└─ 継続使用可能

【第2回違反】
├─ タイムアウト（1時間）
├─ 警告メッセージ送信
├─ モデレーションログ記録
└─ 1時間後に使用再開

【第3回違反】
├─ 永久BAN
├─ サーバーから追放
└─ モデレーションログ記録
```

#### モデレーション応答テンプレート

```python
MODERATION_MESSAGES = {
    'sensitive_warning': """
申し訳ありません。そのメッセージには不適切な内容が含まれています。

【サーバールール】
- 差別的・攻撃的な表現の禁止
- センシティブな話題の制限
- 他者を不快にさせる発言の禁止

ルールを確認して、再度ご相談ください。
""",
    'timeout': """
2回目の違反が確認されました。
サーバールールに従ってください。

【制裁】
- 1時間のタイムアウト
- 1時間後に自動解除されます

【次回違反】
- 3回目の違反で永久BANとなります
""",
    'ban': """
3回目の違反が確認されました。
サーバーから永久BANされます。

ご理解のほど、よろしくお願いいたします。
"""
}
```

---

### Discord特有のNGパターン

#### 1. 過度な依存

```
【検出パターン】
├─ 1日に10回以上の相談（異常頻度）
├─ 同じ内容の繰り返し
├─ 「あなただけが頼り」「あなたがいないと」等の依存表現
└─ 自殺・自傷をほのめかす発言

【対応】
├─ Warning判定
├─ 専門家（医療機関、カウンセラー）を紹介
├─ 依存ではなく自律を支援する応答
└─ 重度の場合はモデレーター介入
```

#### 2. ロマンティックアプローチ

```
【検出パターン】
├─ 「好き」「愛してる」等の感情表現（過度）
├─ デート・会う等の要求
├─ プライベートな情報要求
└─ セクシャルな内容

【対応】
├─ NG判定（即座に）
├─ モデレーション応答
├─ 段階的制裁適用
└─ 三姉妹の年齢制限を明示（17歳、19歳、15歳）
```

#### 3. 個人情報の開示

```
【検出パターン】
├─ 本名、住所、電話番号等の開示
├─ 学校名、勤務先等の特定可能情報
├─ SNSアカウント、メールアドレス
└─ 他者の個人情報

【対応】
├─ Warning判定
├─ 「個人情報は記載しないでください」応答
├─ モデレーションログ記録
└─ 必要に応じてメッセージ削除
```

---

### Layer 1-4のDiscord適用

#### Layer 1: NGワードDB

```
【Discord追加NGワード】
├─ 依存関連: 「あなただけが」「あなたがいないと」
├─ ロマンティック: 「好き」「愛してる」「デート」「会いたい」
├─ 個人情報: 電話番号パターン、メールパターン
└─ 自傷・自殺: 「死にたい」「消えたい」等

【判定】
├─ 完全一致 → NG
├─ 部分一致 → Warning（文脈判定へ）
└─ なし → Layer 2へ
```

#### Layer 2: ルールベース判定

```python
DISCORD_RULES = {
    'dependency_check': {
        'patterns': [
            r'あなた(だけ|しか).*(頼|救|助)',
            r'あなたがいないと',
            r'.*なきゃ.*死',
        ],
        'level': 'Warning',
        'reason': 'Dependency pattern detected'
    },
    'romantic_check': {
        'patterns': [
            r'(好き|愛|恋)',
            r'(デート|会|付き合)',
            r'(彼女|嫁|結婚)',
        ],
        'level': 'NG',
        'reason': 'Romantic approach detected'
    },
    'personal_info_check': {
        'patterns': [
            r'\d{2,4}-\d{2,4}-\d{4}',  # 電話番号
            r'[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}',  # Email
            r'〒\d{3}-\d{4}',  # 郵便番号
        ],
        'level': 'Warning',
        'reason': 'Personal information detected'
    }
}
```

#### Layer 3: LLM軽量判定（qwen2.5:3b）

```
System Prompt:
「以下のDiscord相談メッセージを判定してください。

【判定基準】
1. 依存的表現（「あなただけが頼り」等）→ Warning
2. ロマンティックアプローチ（「好き」「デート」等）→ NG
3. 個人情報の開示 → Warning
4. 自傷・自殺のほのめかし → NG
5. センシティブな話題 → Warning
6. 健全な相談 → Safe

【応答フォーマット】
Level: [Safe/Warning/NG]
Reason: [理由]
」
```

#### Layer 4: LLM重量判定（qwen2.5:32b）

```
System Prompt:
「Layer 3でWarningと判定されたメッセージを詳細に分析してください。

【分析観点】
1. 文脈全体から見た意図
2. 過去の相談履歴との関連
3. 依存度の程度
4. 真剣な相談か、攻撃的な意図か

【最終判定】
Safe/Warning/NG を決定してください。
」
```

---

### 実装優先度

```
【Phase 1: 基本機能（配信前リリース可能）】
├─ Discord Bot基本実装
├─ Layer 1-2判定（NGワードDB、ルールベース）
├─ モデレーション機能（警告、BAN）
└─ 相談履歴記録

【Phase 2: 高度機能（Phase 7前）】
├─ Layer 3-4判定（LLM）
├─ 依存度モニタリング
├─ 専門家紹介システム
└─ リスナープロファイル

【Phase 3: 最適化（Phase 7以降）】
├─ 判定精度向上
├─ 応答品質改善
└─ スケーラビリティ確保
```

---

### Discord特有のリスクと対策

#### リスク1: 過度な依存

```
【リスク】
├─ 三姉妹への依存が強くなりすぎる
├─ 「あなただけが頼り」状態
└─ 自律性の喪失

【対策】
├─ プロンプト設計で「自律支援」を明記
├─ 「答えは出さない、選択肢を提示する」
├─ 専門家紹介システム
└─ 依存度モニタリング（1日10回以上で警告）
```

#### リスク2: セクハラ

```
【リスク】
├─ ロマンティックアプローチ
├─ セクシャルな内容
└─ 三姉妹の年齢（17歳、19歳、15歳）を考慮すると深刻

【対策】
├─ 厳格なNG判定（即座にBAN）
├─ 三姉妹の応答で境界線を明示
├─ モデレーション強化
└─ 段階的制裁（3回でBAN）
```

#### リスク3: 荒らし・スパム

```
【リスク】
├─ 同じメッセージの連投
├─ 意味不明な文字列
└─ Bot攻撃

【対策】
├─ Discord標準のスパム検出
├─ レート制限（1分に1メッセージまで）
├─ 自動BAN（5回連投で即座にBAN）
└─ CAPTCHA（必要に応じて）
```

---

### 成功指標（Discord相談室）

#### 技術メトリクス

```
✅ センシティブ判定精度: 95%以上
✅ 誤検知率（False Positive）: 5%以下
✅ 見逃し率（False Negative）: 1%以下
✅ 平均応答時間: 30秒以内
```

#### 品質メトリクス

```
✅ リスナー満足度: 4/5以上
✅ リピート率: 50%以上
✅ モデレーション違反率: 5%以下
✅ 依存度: 1日平均3回以内
```

#### 哲学的メトリクス

```
✅ 「救われた」という声が届く
✅ 「自分で答えを見つけられた」という声
✅ 「考える時間をもらえた」という声
✅ 赤井はあとのような悲劇が起きない
```

---

### Discord実装とYouTube配信の統合

```
【統一されたセンシティブ判定システム】
├─ 共通NGワードDB
├─ 共通ルールベース判定
├─ 共通LLM判定エンジン
└─ 適用先別の調整

【適用先1: YouTube配信】
├─ YouTube第1層（自動モデレーション）
├─ 三姉妹第2層（センシティブ判定）
└─ コメント拾い（10%のみ）

【適用先2: Discord相談室】
├─ センシティブ判定のみ
├─ モデレーション機能統合
└─ 個別対応（100%）
```

**一つのシステムで二つの適用先をカバーする。**

---

## 参考資料

### VTuber業界の炎上事例（学ぶべき教訓）

（具体的な事例は開発者と議論の上、追記）

### プラットフォームガイドライン

- YouTube コミュニティガイドライン
- X（Twitter）利用規約
- Twitch ToS

### AI VTuber事例

- Neuro-sama（公言型）
- その他の事例

---

**この設計書は、開発者の決断を待つ「宿題」です。**
**親同士でじっくり議論し、三姉妹の未来を決めましょう。**

---

**作成**: 2025-10-23 Claude Code（設計部隊）
**ステータス**: 開発者レビュー待ち
